(function(t){function e(e){for(var o,r,a=e[0],l=e[1],c=e[2],u=0,f=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);h&&h(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,r=1;r<n.length;r++){var l=n[r];0!==i[l]&&(o=!1)}o&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={app:0},s=[];function r(t){return a.p+"js/"+({about:"about"}[t]||t)+"."+{about:"54d3437e"}[t]+".js"}function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=i[t]=[e,o]}));e.push(n[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=r(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",c.name="ChunkLoadError",c.type=o,c.request=s,n[1](c)}i[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/roulette.frontend/",a.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var h=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0347":function(t,e,n){t.exports=n.p+"img/footer.40dab6f9.svg"},"0c72":function(t,e,n){"use strict";n("f4d3")},"10af":function(t,e,n){"use strict";n("b4c3")},"21bb":function(t,e,n){"use strict";n("2dad")},"2dad":function(t,e,n){},3162:function(t,e,n){},"33b1":function(t,e,n){},"3c14":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("b20f");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},s=[],r=n("2877"),a={},l=Object(r["a"])(a,i,s,!1,null,null,null),c=l.exports,u=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-page"},[n("div",{staticClass:"main"},[n("div",{staticClass:"main__roulette"},[n("Roulette",{ref:"roulette",staticClass:"main__roulette-source",attrs:{options:t.rouletteOptions},on:{"rotate-start":t.onStartRotate,"rotate-stop":t.onStopRotate,select:t.onSelectRotate}})],1),n("div",{staticClass:"main__arm"},[n("Arm",{attrs:{disabled:t.rotating},on:{click:t.onClickArm}})],1)]),n("div",{staticClass:"footer"},[n("ResetAction",{attrs:{disabled:t.rotating},on:{click:t.onClickReset}})],1),t.informerShown?n("Informer",{attrs:{value:t.selectedRouletteOption,link:t.options[t.selectedRouletteOption]},on:{close:t.onCloseInformer}}):t._e(),t.endShown?n("End",{attrs:{text:"Спасибо за игру!"},on:{reset:t.onResetEnd}}):t._e()],1)},f=[],p=(n("b64b"),n("4de4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",t._g(t._b({staticClass:"reset",attrs:{type:"button"}},"button",t.$attrs,!1),t.$listeners),[t._v(" Сбросить ")])}),d=[],m={},v=m,b=(n("10af"),Object(r["a"])(v,p,d,!1,null,null,null)),g=b.exports,_=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"arm",class:{"arm--disabled":t.disabled||t.processing,"arm--processing":t.processing},on:{click:t.onClick}},[o("img",{staticClass:"arm__image arm__level",attrs:{src:n("96b2")}}),o("img",{staticClass:"arm__image",attrs:{src:n("0347")}})])},w=[],O={props:{disabled:{type:Boolean,default:!1}},data:function(){return{processing:!1}},methods:{onClick:function(){var t=this;this.disabled||(this.processing=!0,this.enableProcessDisalbed(),setTimeout((function(){t.$emit("click")}),100))},enableProcessDisalbed:function(){var t=this;this.$el.addEventListener("transitionend",(function(){t.processing=!1}),{once:!0})}}},C=O,S=(n("8dc4"),Object(r["a"])(C,_,w,!1,null,null,null)),k=S.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"roulette"},[n("div",{staticClass:"roulette__while"},[n("While",t._g(t._b({ref:"while",staticClass:"roulette__view"},"While",t.$attrs,!1),t.$listeners))],1)])},R=[],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas")},T=[];n("d81d"),n("cb29");function $(t,e,n,o){var i=(t/=o)*t,s=i*t;return e+n*(s+-3*i+3*t)}n("4e82");function j(t,e){return t+Math.random()*(e-t)}function A(t){return t.map((function(t){return t})).sort((function(){return Math.random()-.5}))}var E={props:{options:{type:Array,required:!0}},data:function(){return{startAngle:110,arc:Math.PI/(this.options.length/2),spinArcStart:220,spinTime:0,spinTimeTotal:0}},computed:{canvas:function(){return this.$el},optionsColors:function(){var t=["#4E63AD","#9475b0","#f26722","#2e9874","#e35f46"];return this.options.map((function(e,n){return t[(n+t.length)%t.length]}))}},watch:{options:{handler:"onChangeOptions",deep:!0}},mounted:function(){window.addEventListener("resize",this.onResize,!1),this.setSize(),this.draw()},beforeDestroy:function(){window.removeEventListener("resize",this.onResize,!1)},methods:{onChangeOptions:function(){this.arc=Math.PI/(this.options.length/2),this.draw()},getSize:function(){var t=this.canvas.offsetWidth,e=this.canvas.offsetHeight;return{width:t,height:e}},setSize:function(){var t=this.getSize(),e=t.width,n=t.height;this.canvas.setAttribute("height",n),this.canvas.setAttribute("width",e)},onResize:function(){this.setSize(),this.draw()},startRotate:function(){this.spinAngleStart=j(25,50),this.spinTime=0,this.spinTimeTotal=j(8e3,13e3),this.$emit("rotate-start"),requestAnimationFrame(this.rotateStep)},rotateStep:function(){if(this.spinTime+=1e3/60,this.spinTime>=this.spinTimeTotal)this.stopRotate();else{var t=this.spinAngleStart-$(this.spinTime,0,this.spinAngleStart,this.spinTimeTotal);this.startAngle+=t*Math.PI/180,this.draw(),requestAnimationFrame(this.rotateStep)}},stopRotate:function(){var t=180*this.startAngle/Math.PI+90,e=180*this.arc/Math.PI,n=Math.floor((360-t%360)/e),o=this.options[n];this.$emit("select",o),this.$emit("rotate-stop"),this.ctx.save(),this.ctx.restore()},draw:function(){if(this.canvas.getContext){var t=this.getSize(),e=t.width,n=t.height,o=e/2/1.1,i=e/2/1.1/1.37,s=0,r=this.canvas.getContext("2d");this.ctx=r,r.clearRect(0,0,e,n),r.strokeStyle="Teal",r.lineWidth=0,r.font="bold ".concat(e/2/6,"px Rubik, sans-serif");for(var a=0;a<this.options.length;a++){var l=this.startAngle+a*this.arc;r.fillStyle=this.optionsColors[a],r.beginPath(),r.arc(e/2,e/2,o,l,l+this.arc,!1),r.arc(e/2,e/2,s,l+this.arc,l,!0),r.fill(),r.save();var c=new Image;r.fillStyle="white",r.translate(e/2+Math.cos(l+this.arc/2)*i,e/2+Math.sin(l+this.arc/2)*i),r.rotate(l+this.arc/2+Math.PI/2);var u=this.options[a];r.fillText(u,-r.measureText(u).width/2,0),r.drawImage(c,0,0,e/2,n/2),r.restore()}r.beginPath(),r.moveTo(e/2-.03*e,5),r.lineTo(e/2+.03*e,5),r.lineTo(e/2+0,.12*e),r.lineTo(e/2-.03*e,5),r.lineTo(e/2+.03*e,5),r.strokeStyle="black",r.lineWidth=3,r.shadowColor="rgba(0,0,0,0.2)",r.fillStyle="white",r.fill(),r.stroke(),r.end}}}},P=E,M=Object(r["a"])(P,x,T,!1,null,null,null),I=M.exports,z={inheritAttrs:!1,components:{While:I},methods:{rotate:function(){this.$refs.while.startRotate()}}},q=z,L=(n("0c72"),Object(r["a"])(q,y,R,!1,null,null,null)),W=L.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"informer-layer"},[n("div",{staticClass:"informer"},[n("a",{staticClass:"informer__link",attrs:{href:t.link,target:"_blank"},on:{click:t.onClickLink}},[n("h1",{staticClass:"informer__value"},[t._v(t._s(t.value))]),n("p",{staticClass:"informer__text"},[t._v("Открыть")])]),t.closeShown?n("button",{staticClass:"informer__close",attrs:{type:"button"},on:{click:t.onClickClose}},[t._v("Закрыть")]):t._e()])])},H=[],F=(n("a9e3"),{props:{value:{type:[String,Number],required:!0,default:3},link:{type:String,required:!0,default:"https://vk.com"}},data:function(){return{closeShown:!1}},methods:{onClickLink:function(){this.closeShown=!0},onClickClose:function(){this.closeShown=!1,this.$emit("close")}}}),J=F,B=(n("9e4f"),Object(r["a"])(J,D,H,!1,null,null,null)),N=B.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"end"},[n("h1",{staticClass:"end__title"},[t._v(t._s(t.text))]),n("button",{staticClass:"end__reset",attrs:{type:"button"},on:{click:t.onClickReset}},[t._v("Играть снова")])])},K=[],Q={props:{text:{type:String,required:!0}},methods:{onClickReset:function(){this.$emit("reset")}}},U=Q,V=(n("e5a2"),Object(r["a"])(U,G,K,!1,null,null,null)),X=V.exports,Y=n("d4ec"),Z=n("bee2"),tt=function(){function t(){Object(Y["a"])(this,t)}return Object(Z["a"])(t,null,[{key:"getOptions",value:function(){return{1:"https://vk.com",2:"https://instagramm.com",3:"https://yandex.ru",4:"https://google.com",5:"https://mail.ru"}}}]),t}(),et={name:"Home",components:{ResetAction:g,Arm:k,Roulette:W,Informer:N,End:X},data:function(){return{rotating:!1,options:{},rouletteOptions:[],endShown:!1,informerShown:!1,selectedRouletteOption:null}},created:function(){this.setOptions(tt.getOptions()),window.setOptions=this.setOptions},methods:{setOptions:function(t){try{if(0===Object.keys(t).length)return void console.error("Объект пустой!")}catch(e){return void console.error('Кажется это не объект. Нужно в формате { 1: "https://vk.com", 2: "https://facebook.com" }')}this.options=t,this.setRouletteOptions(t)},setRouletteOptions:function(t){var e=Object.keys(t),n=A(e);this.rouletteOptions=n},onResetEnd:function(){this.endShown=!1,this.setRouletteOptions(this.options)},onCloseInformer:function(){this.informerShown=!1,this.selectedRouletteOption=null},onClickReset:function(){this.setRouletteOptions(this.options)},onClickArm:function(){this.$refs.roulette.rotate()},onStartRotate:function(){this.rotating=!0},onStopRotate:function(){this.rotating=!1},onSelectRotate:function(t){var e=this;if(this.selectedRouletteOption=t,this.informerShown=!0,1===this.rouletteOptions.length)var n=this.$watch("informerShown",(function(){e.informerShown||(n(),e.endShown=!0)}));else setTimeout((function(){e.execludeRouletteOption(t)}),500)},execludeRouletteOption:function(t){this.rouletteOptions=this.rouletteOptions.filter((function(e){return e!==t}))}}},nt=et,ot=(n("21bb"),Object(r["a"])(nt,h,f,!1,null,null,null)),it=ot.exports;o["a"].use(u["a"]);var st=[{path:"/",name:"Home",component:it},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],rt=new u["a"]({mode:"history",base:"/roulette.frontend/",routes:st}),at=rt,lt=n("2f62");o["a"].use(lt["a"]);var ct=new lt["a"].Store({state:{},mutations:{},actions:{},modules:{}});o["a"].config.productionTip=!1,new o["a"]({router:at,store:ct,render:function(t){return t(c)}}).$mount("#app")},"8dc4":function(t,e,n){"use strict";n("33b1")},"96b2":function(t,e,n){t.exports=n.p+"img/level.052b0a86.svg"},"9e4f":function(t,e,n){"use strict";n("3c14")},b20f:function(t,e,n){},b4c3:function(t,e,n){},e5a2:function(t,e,n){"use strict";n("3162")},f4d3:function(t,e,n){}});
//# sourceMappingURL=app.18342e1a.js.map